webpackJsonp([1],{"1St5":function(t,i){},NHnr:function(t,i,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var e=a("7+uW"),n={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},staticRenderFns:[]};var h=a("VU/8")({name:"app"},n,!1,function(t){a("lPQf")},null,null).exports,c=(a("j1ja"),a("/ocq")),r={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"hello"},[i("ul",[i("li",[i("router-link",{attrs:{to:{name:"LineChart"}}},[this._v("折線圖")])],1),this._v(" "),i("li",[i("router-link",{attrs:{to:{name:"BarPChart"}}},[this._v("橫條圖")])],1),this._v(" "),i("li",[i("router-link",{attrs:{to:{name:"BarVChart"}}},[this._v("直條圖")])],1),this._v(" "),i("li",[i("router-link",{attrs:{to:{name:"DonutChart"}}},[this._v("甜甜圈圖")])],1)])])},staticRenderFns:[]};var s=a("VU/8")({},r,!1,function(t){a("gCPU")},null,null).exports,o=a("vwbq"),d={data:function(){return{data:[],chart:{width:500,height:500,paddingTop:30,paddingRight:30,paddingBottom:100,paddingLeft:60},hideTooltip:!0,conWidth:0,canvas:void 0,ctx:void 0,canvasA:void 0,ctxA:void 0,customBase:void 0,custom:void 0,yTick:void 0,timer:void 0}},computed:{conRate:function(){return(this.chart.height+this.chart.paddingTop+this.chart.paddingBottom)/(this.chart.width+this.chart.paddingLeft+this.chart.paddingRight)},conHeight:function(){return this.conWidth*this.conRate},chartWidth:function(){return this.conWidth*this.chart.width/(this.chart.width+this.chart.paddingLeft+this.chart.paddingRight)},chartHeight:function(){return this.conHeight*this.chart.height/(this.chart.height+this.chart.paddingTop+this.chart.paddingBottom)},chartTop:function(){return this.conHeight*this.chart.paddingTop/(this.chart.height+this.chart.paddingTop+this.chart.paddingBottom)},chartLeft:function(){return this.conWidth*this.chart.paddingLeft/(this.chart.width+this.chart.paddingLeft+this.chart.paddingRight)},xScale:function(){return o.g().domain([0,this.data[0].value.length]).range([0,this.chartWidth])},yScale:function(){var t,i=[];return this.data.forEach(function(t,a){t.value.forEach(function(t){i.push(t.number)})}),t=o.e(i),o.g().domain([0,t]).range([this.chartHeight,0])},yAxis:function(){return o.b(this.yScale).tickSizeInner(-this.chart.height)},color:function(){return o.h(o.i)},dataArray:function(){var t=[];return this.data.forEach(function(i,a){var e=[];i.value.forEach(function(t){e.push(t.number)}),t.push(e)}),t},line:function(){var t=this;return o.d().x(function(i,a){return t.xScale(a+1)+t.chartLeft}).y(function(i){return t.yScale(i)+t.chartTop})},lineCanvas:function(){var t=this;return o.d().x(function(i,a){return t.xScale(a+1)+t.chartLeft}).y(function(i){return t.yScale(i)+t.chartTop}).context(this.ctxA)},lines:function(){var t=this,i=[];return this.dataArray.forEach(function(a,e){i.push({color:t.color(e),d:t.line(a)})}),i},dots:function(){var t=this,i=[];return this.data.forEach(function(a,e){a.value.forEach(function(n,h){i.push({color:t.color(e),cx:t.xScale(h+1)+t.chartLeft,cy:t.yScale(n.number)+t.chartTop,r:5,name:a.name,month:n.month,number:n.number})})}),i}},mounted:function(){this.randomData()},methods:{initCanvas:function(){var t=document.querySelector(".chartContain"),i=document.getElementById("canvas"),a=document.getElementById("canvasA");null!==i&&(i.parentNode.removeChild(i),a.parentNode.removeChild(a)),this.conWidth=t.offsetWidth,this.canvas=o.k(".chartContain").append("canvas").attr("id","canvas").attr("class","chart").attr("width",this.conWidth).attr("height",this.conHeight),this.canvasA=o.k(".chartContain").append("canvas").attr("id","canvasA").attr("class","chartA").attr("width",this.conWidth).attr("height",this.conHeight),this.ctx=this.canvas.node().getContext("2d"),this.ctxA=this.canvasA.node().getContext("2d"),this.customBase=document.createElement("custom"),this.custom=o.k(this.customBase),this.dataBind(this.data)},dataBind:function(t){this.yTick=this.custom.append("g").attr("class","axis axisY").call(this.yAxis).selectAll("g.tick"),this.drawCanvas()},drawCanvas:function(){var t=this,i=document.querySelector("#canvasA");this.ctx.clearRect(0,0,this.conWidth,this.conHeight),this.ctx.beginPath(),this.data[0].value.forEach(function(i,a){t.ctx.moveTo(t.xScale(a+1)+t.chartLeft,t.chartTop+t.chartHeight),t.ctx.lineTo(t.xScale(a+1)+t.chartLeft,t.chartTop+t.chartHeight+6)}),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.chartLeft,this.chartTop+this.chartHeight),this.ctx.lineTo(this.chartLeft+this.chartWidth,this.chartTop+this.chartHeight),this.ctx.stroke(),this.ctx.textAlign="center",this.ctx.textBaseline="top",this.data[0].value.forEach(function(i,a){t.ctx.fillText(i.month,t.xScale(a+1)+t.chartLeft,t.chartTop+t.chartHeight+6)}),this.data.forEach(function(i,a){t.ctx.save(),t.ctx.beginPath(),t.ctx.arc(t.chartLeft+100*a,t.chartTop+t.chartHeight+50,5,0,2*Math.PI),t.ctx.fillStyle=t.color(a),t.ctx.fill(),t.ctx.closePath(),t.ctx.textAlign="left",t.ctx.textBaseline="middle",t.ctx.font="16px sans-serif",t.ctx.fillStyle="#000",t.ctx.fillText(i.name,t.chartLeft+100*a+10,t.chartTop+t.chartHeight+50),t.ctx.restore()}),this.ctx.beginPath(),this.yTick.each(function(i,a,e){var n=o.k(e[a]).attr("transform"),h=Number(n.split(",")[1].split(")")[0])+t.chartTop;0!==a&&(t.ctx.moveTo(t.chartLeft,h),t.ctx.lineTo(t.chartLeft+t.chartWidth,h))}),this.ctx.strokeStyle="#e6e6e6",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.chartLeft-6,this.chartTop),this.ctx.lineTo(this.chartLeft,this.chartTop),this.ctx.strokeStyle="#000",this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.chartLeft,this.chartTop),this.ctx.lineTo(this.chartLeft,this.chartTop+this.chartHeight),this.ctx.stroke(),this.ctx.textAlign="right",this.ctx.textBaseline="middle",this.yTick.each(function(i,a,e){var n=o.k(e[a]),h=n.attr("transform"),c=Number(h.split(",")[1].split(")")[0])+t.chartTop;t.ctx.fillText(n.property("innerText"),t.chartLeft-6,c)}),this.ctx.save(),this.ctx.translate(0,0),this.ctx.rotate(-Math.PI/2),this.ctx.textAlign="center",this.ctx.textBaseline="top",this.ctx.font="16px sans-serif",this.ctx.fillText("件數",-(this.chartTop+this.chartHeight/2),0),this.ctx.restore(),this.timer=o.l(function(i){t.animationLine(i)}),i.addEventListener("mousemove",function(i){t.showTooltip(i)})},animationLine:function(t){var i=this,a=Math.min(1,t/500);this.ctxA.clearRect(0,0,this.conWidth,this.conHeight),this.lines.forEach(function(t,e){var n,h=document.querySelector("#calPath path");h.setAttribute("d",t.d),n=h.getTotalLength(),i.ctxA.setLineDash([n]),i.ctxA.lineDashOffset=n*(1-a),i.ctxA.beginPath(),i.lineCanvas(i.dataArray[e]),i.ctxA.strokeStyle=t.color,i.ctxA.stroke()}),this.dots.forEach(function(t,e){i.ctxA.beginPath(),i.ctxA.arc(t.cx,t.cy,t.r*a,0,2*Math.PI),i.ctxA.fillStyle=t.color,i.ctxA.fill(),i.ctxA.strokeStyle="#fff",i.ctxA.stroke(),i.ctxA.closePath()}),1===a&&this.timer.stop()},randomData:function(){for(var t=[{name:"鼓山區",value:[{month:"6月",number:"233"},{month:"7月",number:"412"},{month:"8月",number:"533"},{month:"9月",number:"267"},{month:"10月",number:"321"}]},{name:"左營區",value:[{month:"6月",number:"432"},{month:"7月",number:"443"},{month:"8月",number:"334"},{month:"9月",number:"233"},{month:"10月",number:"114"}]},{name:"楠梓區",value:[{month:"6月",number:"222"},{month:"7月",number:"333"},{month:"8月",number:"441"},{month:"9月",number:"468"},{month:"10月",number:"378"}]}],i=0;i<3;i++)t[i].value.forEach(function(t){t.number=Math.floor(501*Math.random())+0});this.data=t,this.initCanvas(),window.addEventListener("resize",this.initCanvas)},showTooltip:function(t){var i=this,a=document.querySelector("#canvasA").getBoundingClientRect(),e=t.clientX-a.left,n=t.clientY-a.top,h=e+20,c=n,r=!1;this.dots.forEach(function(t,a){i.ctxA.beginPath(),i.ctxA.arc(t.cx,t.cy,t.r,0,2*Math.PI),i.ctxA.isPointInPath(e,n)&&!r?(document.querySelector(".tooltip").setAttribute("style","left: "+h+"px; top: "+c+"px;"),document.querySelector(".tooltip .name").innerHTML=t.name+" / "+t.month,document.querySelector(".tooltip .value").innerHTML=t.number+" 件",i.hideTooltip=!1,r=!0):i.ctxA.isPointInPath(e,n)||r||(i.hideTooltip=!0)})}}},l={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"lineChart"},[a("h1",[t._v("折線圖")]),t._v(" "),a("div",{staticClass:"detail"},[t._v("高雄市不動產買賣統計(104年6-10月)")]),t._v(" "),a("div",{staticClass:"chartContain"},[a("svg",{attrs:{version:"1.1",id:"calPath"}},[a("path",{attrs:{d:""}})]),t._v(" "),a("div",{class:{tooltip:!0,hidden:t.hideTooltip}},[a("div",{staticClass:"name"},[t._v("左營區 / 10月")]),t._v(" "),a("div",{staticClass:"value"},[t._v("214 件")])])]),t._v(" "),a("button",{on:{click:t.randomData}},[t._v("隨機資料")])])},staticRenderFns:[]};var u=a("VU/8")(d,l,!1,function(t){a("j6DD")},null,null).exports,f={data:function(){return{data:[],chart:{width:500,height:500,paddingTop:30,paddingRight:30,paddingBottom:100,paddingLeft:60},hideTooltip:!0,conWidth:0,canvas:void 0,ctx:void 0,canvasA:void 0,ctxA:void 0,customBase:void 0,custom:void 0,xTick:void 0,yTick:void 0,timer:void 0}},computed:{conRate:function(){return(this.chart.height+this.chart.paddingTop+this.chart.paddingBottom)/(this.chart.width+this.chart.paddingLeft+this.chart.paddingRight)},conHeight:function(){return this.conWidth*this.conRate},chartWidth:function(){return this.conWidth*this.chart.width/(this.chart.width+this.chart.paddingLeft+this.chart.paddingRight)},chartHeight:function(){return this.conHeight*this.chart.height/(this.chart.height+this.chart.paddingTop+this.chart.paddingBottom)},chartTop:function(){return this.conHeight*this.chart.paddingTop/(this.chart.height+this.chart.paddingTop+this.chart.paddingBottom)},chartLeft:function(){return this.conWidth*this.chart.paddingLeft/(this.chart.width+this.chart.paddingLeft+this.chart.paddingRight)},valueLength:function(){return this.data.value?this.data.value.length:0},xScale:function(){var t,i=[];return this.data.value.forEach(function(t){i.push(t.number)}),t=o.e(i),o.g().domain([0,t]).range([0,this.chartWidth])},yScale:function(){return o.g().domain([0,this.data.value.length+1]).range([this.chartHeight,0])},xAxis:function(){return o.a(this.xScale).tickSizeInner(-this.chartWidth)},yAxis:function(){var t=this,i=this.valueLength<3?this.valueLength+1:this.valueLength;return o.b(this.yScale).ticks(i).tickFormat(function(i,a){return t.yLabel[a]})},yLabel:function(){var t=[""];return this.data.value.forEach(function(i){t.push(i.month)}),t},color:function(){return o.h(o.i)},barWidth:function(){return this.chartHeight/(this.valueLength+1)-20},bars:function(){var t=this,i=[];return this.data.value.forEach(function(a,e){i.push({color:t.color(0),x:t.chartLeft,y:t.chartTop+t.yScale(e+1)-t.barWidth/2,width:t.xScale(a.number),height:t.barWidth,month:a.month,number:a.number})}),i}},mounted:function(){this.randomData()},methods:{initCanvas:function(){var t=document.querySelector(".chartContain"),i=document.getElementById("canvas"),a=document.getElementById("canvasA");null!==i&&(i.parentNode.removeChild(i),a.parentNode.removeChild(a)),this.conWidth=t.offsetWidth,this.canvas=o.k(".chartContain").append("canvas").attr("id","canvas").attr("class","chart").attr("width",this.conWidth).attr("height",this.conHeight),this.canvasA=o.k(".chartContain").append("canvas").attr("id","canvasA").attr("class","chartA").attr("width",this.conWidth).attr("height",this.conHeight),this.ctx=this.canvas.node().getContext("2d"),this.ctxA=this.canvasA.node().getContext("2d"),this.customBase=document.createElement("custom"),this.custom=o.k(this.customBase),this.dataBind(this.data)},dataBind:function(t){this.xTick=this.custom.append("g").attr("class","axis axisX").call(this.xAxis).selectAll("g.tick"),this.yTick=this.custom.append("g").attr("class","axis axisY").call(this.yAxis).selectAll("g.tick"),this.drawCanvas()},drawCanvas:function(){var t=this,i=document.querySelector("#canvasA");this.ctx.save(),this.ctx.beginPath(),this.xTick.each(function(i,a,e){var n=o.k(e[a]).attr("transform"),h=Number(n.split(",")[0].split("(")[1])+t.chartLeft;0!==a&&(t.ctx.moveTo(h,t.chartTop),t.ctx.lineTo(h,t.chartTop+t.chartHeight))}),this.ctx.setLineDash([4,6]),this.ctx.lineWidth=2,this.ctx.strokeStyle="#efefef",this.ctx.stroke(),this.ctx.restore(),this.ctx.textAlign="center",this.ctx.textBaseline="top",this.xTick.each(function(i,a,e){var n=o.k(e[a]),h=n.attr("transform"),c=Number(h.split(",")[0].split("(")[1])+t.chartLeft;t.ctx.fillText(n.property("innerText"),c,t.chartTop+t.chartHeight)}),this.ctx.save(),this.ctx.textAlign="center",this.ctx.textBaseline="top",this.ctx.font="16px sans-serif",this.ctx.fillText("件數",this.conWidth/2,this.chartTop+this.chartHeight+30),this.ctx.restore(),this.ctx.beginPath(),this.yTick.each(function(i,a,e){var n=o.k(e[a]).attr("transform"),h=Number(n.split(",")[1].split(")")[0])+t.chartTop;0!==a&&(t.ctx.moveTo(t.chartLeft-6,h),t.ctx.lineTo(t.chartLeft,h))}),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.chartLeft-6,this.chartTop+this.chartHeight),this.ctx.lineTo(this.chartLeft,this.chartTop+this.chartHeight),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.chartLeft,this.chartTop),this.ctx.lineTo(this.chartLeft,this.chartTop+this.chartHeight),this.ctx.stroke(),this.ctx.textAlign="right",this.ctx.textBaseline="middle",this.yTick.each(function(i,a,e){var n=o.k(e[a]),h=n.attr("transform"),c=Number(h.split(",")[1].split(")")[0])+t.chartTop;t.ctx.fillText(n.property("innerText"),t.chartLeft-6,c)}),this.timer=o.l(function(i){t.animationLine(i)}),i.addEventListener("mousemove",function(i){t.showTooltip(i)})},animationLine:function(t){var i=this,a=Math.min(1,t/800);this.ctxA.clearRect(0,0,this.conWidth,this.conHeight),this.bars.forEach(function(t,e){i.ctxA.beginPath(),i.ctxA.rect(t.x,t.y,t.width*a,t.height),i.ctxA.globalAlpha=a,i.ctxA.fillStyle=t.color,i.ctxA.fill()}),this.ctxA.textBaseline="middle",this.ctxA.font="16px sans-serif",this.bars.forEach(function(t,a){var e=t.width+i.chartLeft-5;e<i.chartLeft+50?(i.ctxA.fillStyle="#000",i.ctxA.textAlign="left",e=t.width+i.chartLeft+5):(i.ctxA.fillStyle="#fff",i.ctxA.textAlign="right"),i.ctxA.fillText(t.number,e,t.y+i.barWidth/2)}),1===a&&this.timer.stop()},randomData:function(){for(var t=Math.floor(12*Math.random())+1,i={name:"鼓山區",value:[]},a=0;a<t;a++)i.value.push({month:a+1+"月",number:Math.floor(501*Math.random())+0});this.data=i,this.initCanvas(),window.addEventListener("resize",this.initCanvas)},showTooltip:function(t){var i=this,a=document.querySelector("#canvasA").getBoundingClientRect(),e=t.clientX-a.left,n=t.clientY-a.top,h=e+20,c=n,r=!1;this.bars.forEach(function(t,a){i.ctxA.beginPath(),i.ctxA.rect(t.x,t.y,t.width,t.height),i.ctxA.isPointInPath(e,n)&&!r?(document.querySelector(".tooltip").setAttribute("style","left: "+h+"px; top: "+c+"px;"),document.querySelector(".tooltip .name").innerHTML=i.data.name+" / "+t.month,document.querySelector(".tooltip .value").innerHTML=t.number+" 件",i.hideTooltip=!1,r=!0):i.ctxA.isPointInPath(e,n)||r||(i.hideTooltip=!0)})}}},v={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"barpChart"},[a("h1",[t._v("橫條圖")]),t._v(" "),a("div",{staticClass:"detail"},[t._v("高雄市鼓山區不動產買賣統計(104年)")]),t._v(" "),a("div",{staticClass:"chartContain"},[a("div",{class:{tooltip:!0,hidden:t.hideTooltip}},[a("div",{staticClass:"name"},[t._v("左營區 / 10月")]),t._v(" "),a("div",{staticClass:"value"},[t._v("214 件")])])]),t._v(" "),a("button",{on:{click:t.randomData}},[t._v("隨機資料")])])},staticRenderFns:[]};var x=a("VU/8")(f,v,!1,function(t){a("1St5")},null,null).exports,m={data:function(){return{data:[],chart:{width:500,height:500,paddingTop:30,paddingRight:30,paddingBottom:100,paddingLeft:60,gap:40},hideTooltip:!0,conWidth:0,canvas:void 0,ctx:void 0,canvasA:void 0,ctxA:void 0,customBase:void 0,custom:void 0,xTick:void 0,yTick:void 0,timer:void 0}},computed:{conRate:function(){return(this.chart.height+this.chart.paddingTop+this.chart.paddingBottom)/(this.chart.width+this.chart.paddingLeft+this.chart.paddingRight)},conHeight:function(){return this.conWidth*this.conRate},chartWidth:function(){return this.conWidth*this.chart.width/(this.chart.width+this.chart.paddingLeft+this.chart.paddingRight)},chartHeight:function(){return this.conHeight*this.chart.height/(this.chart.height+this.chart.paddingTop+this.chart.paddingBottom)},chartTop:function(){return this.conHeight*this.chart.paddingTop/(this.chart.height+this.chart.paddingTop+this.chart.paddingBottom)},chartLeft:function(){return this.conWidth*this.chart.paddingLeft/(this.chart.width+this.chart.paddingLeft+this.chart.paddingRight)},chartGap:function(){return this.conWidth*this.chart.gap/(this.chart.width+this.chart.paddingLeft+this.chart.paddingRight)},valueLength:function(){return this.data[0]?this.data[0].value.length:0},xAxis:function(){var t=this,i=this.valueLength<3?this.valueLength+1:this.valueLength;return o.a(this.xScale).ticks(i).tickFormat(function(i,a){return t.xLabel[a]})},yAxis:function(){return o.b(this.yScale).tickSizeInner(-this.chartHeight)},xScale:function(){return o.g().domain([0,this.data[0].value.length+1]).range([0,this.chartWidth])},yScale:function(){var t,i=[];return this.data.forEach(function(t){t.value.forEach(function(t){i.push(t.number)})}),t=o.e(i),o.g().domain([0,t]).range([this.chartHeight,0])},xLabel:function(){var t=[""];return this.data[0].value.forEach(function(i){t.push(i.month)}),t},axisYText:function(){return[0-this.chartHeight/2,0-this.chartLeft]},color:function(){return o.h(o.j)},barWidth:function(){return(this.chartWidth/(this.valueLength+1)*this.valueLength-this.chartGap*this.data.length)/(this.valueLength*this.data.length)},bars:function(){var t=this,i=[];return this.data.forEach(function(a,e){a.value.forEach(function(a,n){i.push({color:t.color(e),x:t.chartLeft+t.xScale(n+1)-t.barWidth*t.data.length/2+t.barWidth*e,y:t.chartTop+t.yScale(a.number),width:t.barWidth,height:t.chartHeight-t.yScale(a.number),name:t.data[e].name,month:a.month,number:a.number})})}),i}},mounted:function(){this.randomData()},methods:{initCanvas:function(){var t=document.querySelector(".chartContain"),i=document.getElementById("canvas"),a=document.getElementById("canvasA");null!==i&&(i.parentNode.removeChild(i),a.parentNode.removeChild(a)),this.conWidth=t.offsetWidth,this.canvas=o.k(".chartContain").append("canvas").attr("id","canvas").attr("class","chart").attr("width",this.conWidth).attr("height",this.conHeight),this.canvasA=o.k(".chartContain").append("canvas").attr("id","canvasA").attr("class","chartA").attr("width",this.conWidth).attr("height",this.conHeight),this.ctx=this.canvas.node().getContext("2d"),this.ctxA=this.canvasA.node().getContext("2d"),this.customBase=document.createElement("custom"),this.custom=o.k(this.customBase),this.dataBind(this.data)},dataBind:function(t){this.xTick=this.custom.append("g").attr("class","axis axisX").call(this.xAxis).selectAll("g.tick"),this.yTick=this.custom.append("g").attr("class","axis axisY").call(this.yAxis).selectAll("g.tick"),this.drawCanvas()},drawCanvas:function(){var t=this,i=document.querySelector("#canvasA");this.ctx.beginPath(),this.xTick.each(function(i,a,e){var n=o.k(e[a]).attr("transform"),h=Number(n.split(",")[0].split("(")[1])+t.chartLeft;0!==a&&(t.ctx.moveTo(h,t.chartTop+t.chartHeight),t.ctx.lineTo(h,t.chartTop+t.chartHeight+6))}),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.chartLeft,this.chartTop+this.chartHeight),this.ctx.lineTo(this.chartLeft+this.chartHeight,this.chartTop+this.chartWidth),this.ctx.stroke(),this.ctx.textAlign="center",this.ctx.textBaseline="top",this.xTick.each(function(i,a,e){var n=o.k(e[a]),h=n.attr("transform"),c=Number(h.split(",")[0].split("(")[1])+t.chartLeft;t.ctx.fillText(n.property("innerText"),c,t.chartTop+t.chartHeight+6)}),this.data.forEach(function(i,a){t.ctx.save(),t.ctx.beginPath(),t.ctx.arc(t.chartLeft+100*a,t.chartTop+t.chartHeight+50,5,0,2*Math.PI),t.ctx.fillStyle=t.color(a),t.ctx.fill(),t.ctx.closePath(),t.ctx.textAlign="left",t.ctx.textBaseline="middle",t.ctx.font="16px sans-serif",t.ctx.fillStyle="#000",t.ctx.fillText(i.name,t.chartLeft+100*a+10,t.chartTop+t.chartHeight+50),t.ctx.restore()}),this.ctx.save(),this.ctx.beginPath(),this.yTick.each(function(i,a,e){var n=o.k(e[a]).attr("transform"),h=Number(n.split(",")[1].split(")")[0])+t.chartTop;0!==a&&(t.ctx.moveTo(t.chartLeft,h),t.ctx.lineTo(t.chartLeft+t.chartWidth,h))}),this.ctx.strokeStyle="#efefef",this.ctx.stroke(),this.ctx.restore(),this.ctx.beginPath(),this.ctx.moveTo(this.chartLeft-6,this.chartTop),this.ctx.lineTo(this.chartLeft,this.chartTop),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(this.chartLeft,this.chartTop),this.ctx.lineTo(this.chartLeft,this.chartTop+this.chartHeight),this.ctx.stroke(),this.ctx.textAlign="right",this.ctx.textBaseline="middle",this.yTick.each(function(i,a,e){var n=o.k(e[a]),h=n.attr("transform"),c=Number(h.split(",")[1].split(")")[0])+t.chartTop;t.ctx.fillText(n.property("innerText"),t.chartLeft-6,c)}),this.ctx.save(),this.ctx.translate(0,0),this.ctx.rotate(-Math.PI/2),this.ctx.textAlign="center",this.ctx.textBaseline="top",this.ctx.font="16px sans-serif",this.ctx.fillText("件數",-(this.chartTop+this.chartHeight/2),0),this.ctx.restore(),this.timer=o.l(function(i){t.animationLine(i)}),i.addEventListener("mousemove",function(i){t.showTooltip(i)})},animationLine:function(t){var i=this,a=Math.min(1,t/800);this.ctxA.clearRect(0,0,this.conWidth,this.conHeight),this.bars.forEach(function(t,e){i.ctxA.beginPath(),i.ctxA.rect(t.x,t.y+t.height*(1-a),t.width,t.height*a),i.ctxA.globalAlpha=a,i.ctxA.fillStyle=t.color,i.ctxA.fill()}),this.ctxA.font="12px sans-serif",this.ctxA.textBaseline="bottom",this.ctxA.textAlign="center",this.ctxA.fillStyle="gray",this.bars.forEach(function(t,a){i.ctxA.fillText(t.number,t.x+i.barWidth/2,t.y)}),1===a&&this.timer.stop()},randomData:function(){var t=Math.floor(12*Math.random())+1,i=[{name:"鼓山區",value:[]},{name:"左營區",value:[]},{name:"楠梓區",value:[]}];i.forEach(function(i){for(var a=0;a<t;a++)i.value.push({month:a+1+"月",number:Math.floor(501*Math.random())+0})}),this.data=i,this.initCanvas(),window.addEventListener("resize",this.initCanvas)},showTooltip:function(t){var i=this,a=document.querySelector("#canvasA").getBoundingClientRect(),e=t.clientX-a.left,n=t.clientY-a.top,h=e+20,c=n,r=!1;this.bars.forEach(function(t,a){i.ctxA.beginPath(),i.ctxA.rect(t.x,t.y,t.width,t.height),i.ctxA.isPointInPath(e,n)&&!r?(document.querySelector(".tooltip").setAttribute("style","left: "+h+"px; top: "+c+"px;"),document.querySelector(".tooltip .name").innerHTML=t.name+" / "+t.month,document.querySelector(".tooltip .value").innerHTML=t.number+" 件",i.hideTooltip=!1,r=!0):i.ctxA.isPointInPath(e,n)||r||(i.hideTooltip=!0)})}}},p={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"barVChart"},[a("h1",[t._v("直條圖")]),t._v(" "),a("div",{staticClass:"detail"},[t._v("高雄市不動產買賣統計(104年)")]),t._v(" "),a("div",{staticClass:"chartContain"},[a("div",{class:{tooltip:!0,hidden:t.hideTooltip}},[a("div",{staticClass:"name"},[t._v("左營區 / 10月")]),t._v(" "),a("div",{staticClass:"value"},[t._v("214 件")])])]),t._v(" "),a("button",{on:{click:t.randomData}},[t._v("隨機資料")])])},staticRenderFns:[]};var g=a("VU/8")(m,p,!1,function(t){a("lwVR")},null,null).exports,A={data:function(){return{data:[],chart:{innerRadius:100,outerRadius:200},hideTooltip:!0,conWidth:0,canvas:void 0,ctx:void 0,canvasA:void 0,ctxA:void 0,customBase:void 0,custom:void 0,timer:void 0}},computed:{conHeight:function(){return this.conWidth},chartOuterRadius:function(){return this.conWidth/2},chartInnerRadius:function(){return this.chartOuterRadius*this.chart.innerRadius/this.chart.outerRadius},radius:function(){return this.chartOuterRadius-(this.chartOuterRadius-this.chartInnerRadius)/2},color:function(){return o.h(o.j)},totalSum:function(){var t=0;return this.data.length&&this.data.forEach(function(i,a){t+=i.value}),t},pie:function(){var t=this,i=[],a=o.c(".0%"),e=o.f().sort(null).value(function(t){return t.value})(this.data);return this.data.length&&this.data.forEach(function(n,h){i.push({startAngle:e[h].startAngle-Math.PI/2,endAngle:e[h].endAngle-Math.PI/2,percentage:a(n.value/t.totalSum),color:t.color(h),name:n.name,value:n.value})}),i}},mounted:function(){this.randomData()},methods:{initCanvas:function(){var t=document.querySelector(".chartWrap"),i=document.getElementById("canvas"),a=document.getElementById("canvasA");null!==i&&(i.parentNode.removeChild(i),a.parentNode.removeChild(a)),this.conWidth=t.offsetWidth,this.canvas=o.k(".chartWrap").append("canvas").attr("id","canvas").attr("class","chart").attr("width",this.conWidth).attr("height",this.conHeight),this.canvasA=o.k(".chartWrap").append("canvas").attr("id","canvasA").attr("class","chartA").attr("width",this.conWidth).attr("height",this.conHeight),this.ctx=this.canvas.node().getContext("2d"),this.ctxA=this.canvasA.node().getContext("2d"),this.customBase=document.createElement("custom"),this.custom=o.k(this.customBase),this.drawCanvas()},drawCanvas:function(){var t=this,i=document.querySelector("#canvasA");this.ctx.clearRect(0,0,this.conWidth,this.conHeight),this.timer=o.l(function(i){t.animationLine(i)}),i.addEventListener("mousemove",function(i){t.showTooltip(i)})},animationLine:function(t){var i=this,a=Math.min(1,t/700);this.ctxA.clearRect(0,0,this.conWidth,this.conHeight),this.pie.forEach(function(t,e){i.ctxA.beginPath(),i.ctxA.arc(i.conWidth/2,i.conHeight/2,i.radius,t.startAngle,t.startAngle+(t.endAngle-t.startAngle)*a),i.ctxA.lineWidth=i.chartOuterRadius-i.chartInnerRadius,i.ctxA.strokeStyle=t.color,i.ctxA.globalAlpha=a,i.ctxA.stroke()}),this.pie.forEach(function(t,a){var e=t.startAngle+(t.endAngle-t.startAngle)/2,n=i.radius*Math.cos(e),h=i.radius*Math.sin(e);i.ctxA.textAlign="center",i.ctxA.textBaseline="middle",i.ctxA.font="16px sans-serif",i.ctxA.fillStyle="#fff",i.ctxA.fillText(t.percentage,i.conWidth/2+n,i.conHeight/2+h)}),1===a&&this.timer.stop()},randomData:function(){var t=[];[{name:"鼓山區",value:233},{name:"左營區",value:290},{name:"楠梓區",value:355},{name:"三民區",value:340},{name:"苓雅區",value:173},{name:"前鎮區",value:199},{name:"小港區",value:145},{name:"鳳山區",value:394},{name:"大寮區",value:151},{name:"仁武區",value:139},{name:"岡山區",value:107}].forEach(function(i,a){Math.random()>=.5&&t.push(i)}),t.forEach(function(t){t.value=Math.floor(501*Math.random())+0}),this.data=t,this.initCanvas(),window.addEventListener("resize",this.initCanvas)},showTooltip:function(t){var i=this,a=document.querySelector("#canvasA").getBoundingClientRect(),e=t.clientX-a.left,n=t.clientY-a.top,h=e+20,c=n,r=!1;this.pie.forEach(function(t,a){i.ctxA.beginPath(),i.ctxA.arc(i.conWidth/2,i.conHeight/2,i.chartOuterRadius,t.startAngle,t.endAngle),i.ctxA.arc(i.conWidth/2,i.conHeight/2,i.chartInnerRadius,t.endAngle,t.startAngle,!0),i.ctxA.closePath(),i.ctxA.isPointInPath(e,n)&&!r?(document.querySelector(".tooltip").setAttribute("style","left: "+h+"px; top: "+c+"px;"),document.querySelector(".tooltip .name").innerHTML=t.name+" / 6月",document.querySelector(".tooltip .value").innerHTML=t.value+" 件",i.hideTooltip=!1,r=!0):i.ctxA.isPointInPath(e,n)||r||(i.hideTooltip=!0)})}}},T={render:function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("div",{staticClass:"donutChart"},[a("h1",[t._v("甜甜圈圖")]),t._v(" "),a("div",{staticClass:"detail"},[t._v("高雄市不動產買賣統計(104年6月)")]),t._v(" "),a("div",{staticClass:"chartContain"},[a("div",{staticClass:"chartWrap"}),t._v(" "),a("ul",{staticClass:"labelWrap"},t._l(t.pie,function(i,e){return a("li",{key:""+e+i.d},[a("span",{staticClass:"color",style:"background-color: "+i.color+";"}),t._v(" "),a("span",{staticClass:"region"},[t._v(t._s(t.data[e].name))]),t._v(" "),a("span",{staticClass:"percentage"},[t._v(t._s(i.percentage))])])})),t._v(" "),a("div",{class:{tooltip:!0,hidden:t.hideTooltip}},[a("div",{staticClass:"name"},[t._v("左營區 / 10%")]),t._v(" "),a("div",{staticClass:"value"},[t._v("214 件")])])]),t._v(" "),a("button",{on:{click:t.randomData}},[t._v("隨機資料")])])},staticRenderFns:[]};var b=a("VU/8")(A,T,!1,function(t){a("rfhW")},null,null).exports;e.a.use(c.a);var y=new c.a({mode:"history",fallback:!1,routes:[{path:"/d3-practice-vue-canvas/dist/",name:"HelloWorld",component:s},{path:"/d3-practice-vue-canvas/dist/LineChart",name:"LineChart",component:u},{path:"/d3-practice-vue-canvas/dist/BarPChart",name:"BarPChart",component:x},{path:"/d3-practice-vue-canvas/dist/BarVChart",name:"BarVChart",component:g},{path:"/d3-practice-vue-canvas/dist/DonutChart",name:"DonutChart",component:b},{path:"*",redirect:"/d3-practice-vue-canvas/dist/"}]});e.a.config.productionTip=!1,new e.a({el:"#app",router:y,components:{App:h},template:"<App/>"})},gCPU:function(t,i){},j6DD:function(t,i){},lPQf:function(t,i){},lwVR:function(t,i){},rfhW:function(t,i){}},["NHnr"]);
//# sourceMappingURL=app.5b72df7b50ee17007dbb.js.map